---
title: "Christian Wulf"
format: html
editor: visual
---

```{r}
#| label: load-packages # nomes únicos
#| include: false # não inclui o resultado no doc

library(tidyverse) # pacote ggplot2 (gráficos) 
library(WDI) #pacote 
# DADOS EM PAINEL
dadosco2damage <- WDI(country = 'all',
                indicator = 'NY.ADJ.DCO2.GN.ZS')
# CORTE TRANSVERSAL
dadosco2damage2023 <- WDI(country = 'all',
                    indicator = 'NY.ADJ.DCO2.GN.ZS',
                    start = 2023, end = 2023)
# SÉRIE TEMPORAL
dadosco2damagede <- WDI(country = 'DE',
                  indicator ='NY.ADJ.DCO2.GN.ZS')

```

## VARIÁVEL

A variável **“CO2 Damage”** foi escolhida com base na sua relevância ambiental e econômica. Essa métrica representa os prejuízos econômicos associados às emissões de dióxido de carbono, refletindo o impacto ambiental causado por atividades humanas e industriais. A escolha se justifica por diversos motivos:

-   **Importância atual do tema**: Em um cenário de crescente preocupação com as mudanças climáticas, o dano causado pelas emissões de CO₂ é um indicador essencial para análises ambientais, econômicas e de políticas públicas.

-   **Capacidade de gerar insights**: A análise dessa variável permite identificar padrões de impacto ambiental ao longo do tempo ou entre diferentes países, ajudando a embasar decisões e estratégias sustentáveis.

-   **Interdisciplinaridade**: Essa variável conecta economia, meio ambiente e desenvolvimento, sendo valiosa para estudos em ESG (Environmental, Social and Governance), sustentabilidade e planejamento econômico.

A partir dela, foi possível construir gráficos que evidenciam variações e tendências, favorecendo uma interpretação visual clara e direta sobre o comportamento e os efeitos desse tipo de dano ambiental.

## GRÁFICO COM DADOS EM PAINEL

Para a análise visual da variável **CO2 Damage**, foi utilizado um gráfico com **dados em painel (panel data)**, que combina dimensões **temporais** e **transversais** — por exemplo, diferentes países ao longo de vários anos. Essa abordagem permite capturar não apenas a evolução da variável ao longo do tempo, mas também comparações entre unidades distintas (como países ou regiões).

O uso do gráfico em painel se justifica por sua capacidade de:

-   **Visualizar tendências temporais** dentro de cada unidade observada;

-   **Comparar padrões entre diferentes grupos**, revelando heterogeneidades e similaridades;

-   **Facilitar a identificação de outliers** ou comportamentos atípicos, tanto no tempo quanto entre grupos.

No gráfico, observa-se que os **danos econômicos associados às emissões de CO2** apresentam comportamentos distintos entre os países. Enquanto algumas nações mostram uma tendência de redução ao longo do tempo — possivelmente refletindo políticas ambientais mais rigorosas ou avanços tecnológicos —, outras exibem padrões de crescimento ou flutuações significativas, indicando vulnerabilidade a choques externos ou ausência de ações mitigatórias consistentes.

Essa representação gráfica fornece uma base sólida para **análises causais**, estudos de correlação com outras variáveis (como PIB, matriz energética, ou políticas ambientais) e desenvolvimento de modelos econométricos com efeitos fixos ou aleatórios.

```{r}
#| label: dadosempainel
#| warning: false
#| echo: false

ggplot() +
  # Pontos dos outros países
  geom_point(data = subset(dadosco2damage, destacar == "Outros"),
             aes(x = year, y = NY.ADJ.DCO2.GN.ZS),
             color = "#1f77b4") +
  
  # Pontos da Alemanha em vermelho (vem por cima)
  geom_point(data = subset(dadosco2damage, destacar == "Alemanha"),
             aes(x = year, y = NY.ADJ.DCO2.GN.ZS),
             color = "red", size = 3) +
  
  # Título e rótulos dos eixos
  labs(
    title = "Dados Econômico Relacionados ao CO2",
    x = "Ano",
    y = "CO2 DAMAGE"
  ) +
  
  theme_minimal(base_size = 14) +
  theme(
    plot.title = element_text(face = "bold", size = 16, hjust = 0.5)
  )
```

## GRÁFICO COM CORTE TRANSVERSAL

É utilizado para comparar diferentes unidades (como países, empresas ou pessoas) em um único momento no tempo. Representa uma fotografia estática, sem considerar variações ao longo dos anos. No gráfico analisado, é possível observar os danos econômicos causados pelas emissões de CO₂ em diversos países no mesmo ano, permitindo uma comparação direta entre eles.

```{r}
#| label: cortetransversal
#| warning: false 
#| echo: false  

unique(dadosco2damage2023$country)
summary(dadosco2damage2023$NY.ADJ.DCO2.GN.ZS)
library(ggplot2)
library(plotly)

# Simulando dados simples — teste com isso primeiro
dados <- data.frame(
  country = c("Germany", "Brazil", "USA", "China", "India"),
  NY.ADJ.DCO2.GN.ZS = c(2.5, 1.2, 3.8, 4.1, 2.0)
)

# Marcar Alemanha
dados$destacar <- ifelse(dados$country == "Germany", "Alemanha", "Outros")

# Gráfico ggplot
grafico_base <- ggplot(dados, aes(x = reorder(country, NY.ADJ.DCO2.GN.ZS),
                                  y = NY.ADJ.DCO2.GN.ZS,
                                  fill = destacar,
                                  text = paste0("País: ", country, "<br>CO2 DAMAGE: ", NY.ADJ.DCO2.GN.ZS))) +
  geom_col() +
  scale_fill_manual(values = c("Alemanha" = "red", "Outros" = "#1f77b4")) +
  labs(
    title = "Dados Econômico Relacionados ao CO2",
    x = "País",
    y = "CO2 DAMAGE",
    fill = "Destaque"
  ) +
  coord_flip() +
  theme_minimal()

# Gráfico interativo
ggplotly(grafico_base, tooltip = "text")
```

## GRÁFICO COM SÉRIE TEMPORAL

É utilizado para acompanhar a evolução de uma variável ao longo do tempo. Mostra como os danos econômicos causados pelas emissões de CO₂ (% do GNI) se comportaram em diferentes anos. Essa visualização permite identificar tendências, variações e possíveis eventos que afetaram diretamente os dados, como mudanças políticas ou ambientais.

```{r}
#| label: serietemporal  
#| warning: false 
#| echo: false    
install.packages("plotly")
library(ggplot2)
library(plotly)

# Verificação: destacando Alemanha
dadosco2damagede$destacar <- ifelse(trimws(dadosco2damagede$country) == "Germany", "Alemanha", "Outros")

# Filtrando dados válidos (remover NAs)
dados_validos <- subset(dadosco2damagede, !is.na(NY.ADJ.DCO2.GN.ZS) & !is.na(year))

# Gráfico base com ggplot2
grafserie <- ggplot(dados_validos, aes(x = year, y = NY.ADJ.DCO2.GN.ZS,
                                       color = destacar,
                                       text = paste0("Ano: ", year,
                                                     "<br>País: ", country,
                                                     "<br>CO2 DAMAGE: ", round(NY.ADJ.DCO2.GN.ZS, 2)))) +
  geom_line(aes(group = country), alpha = 0.3, color = "#a6bddb") +  # Linhas suaves para todos
  geom_line(data = subset(dados_validos, destacar == "Alemanha"),
            aes(group = country),
            color = "red", size = 1.5) +  # Alemanha em destaque
  labs(
    title = "Dados Econômico Relacionados ao CO2",
    x = "Ano",
    y = "CO2 DAMAGE",
    color = "Destaque"
  ) +
  theme_minimal(base_size = 14) +
  theme(
    plot.title = element_text(face = "bold", size = 16, hjust = 0.5)
  )

# Converter em gráfico interativo
grafserie_interativo <- ggplotly(grafserie, tooltip = "text")
```
